<ion-header translucent>
	<ion-toolbar>
	<ion-buttons style="font-size: 25px;margin: 10px;" slot="start" (click)="location.back()">
		<ion-icon name="arrow-back-outline"></ion-icon>
	</ion-buttons>
    <ion-title>Product upgrade</ion-title>
  </ion-toolbar>
  </ion-header>
<ion-content fullscreen>
<ng-container *ngIf="index == undefined || index == ''">
	<ion-item>
	  <ion-label>Category</ion-label>
	  <ion-select [(ngModel)]="category" interface="action-sheet" (ionChange)="selectCategory($event)">
		<ion-select-option *ngFor="let entry of fishcategortList" value="{{entry.code}}">{{entry.name}}</ion-select-option>
	  </ion-select>
	</ion-item>
	<ion-item>
	  <ion-label>Sub-Category</ion-label>
	  <ion-select [(ngModel)]="subcategory" interface="action-sheet" (ionChange)="selectSubCategory($event)">
		<ion-select-option *ngFor="let entry of subcategoryList" value="{{entry.productcode}}">{{entry.productcode}} - {{entry.title}}</ion-select-option>
	  </ion-select>
	</ion-item>
</ng-container>
<ng-container *ngIf="subcategory != undefined">
<ion-card>
	<img alt="M" style="width:100%;height:200px;" src="{{imagepath}}" onerror="this.onerror=null;this.src='https://www.nicepng.com/png/detail/128-1282756_svg-free-download-marlin-clipart-deep-sea-fishing.png';">
	<ion-card-header>
	  <ion-card-subtitle>{{title}}</ion-card-subtitle>
	  <ion-card-title>{{title}}</ion-card-title>
	</ion-card-header>
	<ion-card-content>
	  {{details}}
	</ion-card-content>
</ion-card>
	<div *ngIf="isSubmitted && errorControl.available.errors?.required"
		class="validator-error">
	  Please select Availability.
	</div>
	<div *ngIf="isSubmitted && errorControl.fishsize.errors?.required"
	class="validator-error">
	  Please select size.
	</div>
	<div *ngIf="isSubmitted && errorControl.discountprice.errors?.required"
	class="validator-error">
	  Enter Discount Price.
	</div>
	<div *ngIf="isSubmitted && errorControl.price.errors?.required"
	class="validator-error">
	  Enter Price.
	</div>
	<div *ngIf="isSubmitted && errorControl.stock.errors?.required"
	class="validator-error">
	  Enter Stock.
	</div>
	<div *ngIf="isSubmitted && errorControl.discount.errors?.required"
	class="validator-error">
	  Please select Discount availability.
	</div>
  
  
  <form [formGroup]="formData" id="formData" novalidate>
	  <ion-item>
		  <ion-label>Available</ion-label>
		  <ion-select formControlName="available" [(ngModel)]="available" interface="action-sheet">
			<ion-select-option value="Y">Yes</ion-select-option>
			<ion-select-option value="N">No</ion-select-option>
		  </ion-select>
		</ion-item>
		
		<ion-item>
		  <ion-label>Size</ion-label>
		  <ion-select formControlName="fishsize" [(ngModel)]="fishsize" multiple="true" interface="action-sheet">
			<ion-select-option value="s">Small</ion-select-option>
			<ion-select-option value="m">Medium</ion-select-option>
			<ion-select-option value="l">Large</ion-select-option>
		  </ion-select>
		</ion-item>
		<ion-item>
		  <ion-label>Discount</ion-label>
		  <ion-select formControlName="discount" [(ngModel)]="discount" interface="action-sheet">
			<ion-select-option value="Y">Yes</ion-select-option>
			<ion-select-option value="N">No</ion-select-option>
		  </ion-select>
		</ion-item>
		<ion-item>
		  <ion-label position="floating">Discount Price</ion-label>
		  <ion-input formControlName="discountprice" type="number" [(ngModel)]="discountprice"></ion-input>
		</ion-item>
		<ion-item>
		  <ion-label position="floating">Price</ion-label>
		  <ion-input formControlName="price" type="number" [(ngModel)]="price"></ion-input>
		</ion-item>
		<ion-item>
		  <ion-label position="floating">Current Stock</ion-label>
		  <ion-input formControlName="stock" type="number" [(ngModel)]="stock"></ion-input>
		</ion-item>
		<ion-button type="submit" color="danger" expand="block" (click)="addProduct()" style="margin-right:10px;margin-left:10px;margin-bottom:10px;">
			{{(index == undefined || index == '') ? 'Add Product' : 'Update Product' }}
		</ion-button>
	</form>
</ng-container>
</ion-content>
